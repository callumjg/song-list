{"version":3,"sources":["components/header/logo.jpg","utils/index.js","components/nav/Hamburger.js","hooks/useBodyScrollLock.js","components/nav/Nav.js","components/header/Brand.js","components/header/Header.js","apis/server.js","hooks/useResource.js","components/songs/SongSearch.js","components/util_components/PageButtons.js","components/songs/SongRow.js","components/songs/SongsTable.js","components/songs/Tags.js","components/songs/SongTags.js","components/util_components/Sticky.js","components/util_components/Limiter.js","components/songs/SongsControls.js","components/songs/useSongListReducer.js","components/util_components/Loader.js","components/songs/SongsList.js","components/home/Home.js","components/services/ServicesTable.js","hooks/useListReducer.js","components/services/SongSelector.js","components/services/ServiceForm.js","components/util_components/modal/ModalHeader.js","components/util_components/modal/ModalFooter.js","components/util_components/modal/Modal.js","components/services/ServicesList.js","components/metrics/CategoryButtons.js","components/metrics/RangeButtons.js","components/metrics/MetricsControls.js","components/metrics/MetricsTableHead.js","components/metrics/helpers.js","components/metrics/MetricsTableBody.js","components/metrics/MetricsTable.js","components/metrics/Metrics.js","components/footer/Footer.js","components/App.js","index.js"],"names":["module","exports","history","createBrowserHistory","Hamburger","props","className","onClick","useBodyScrollLock","dependency","body","useRef","document","querySelector","current","useEffect","style","Nav","useState","isNavOpen","setIsNavOpen","push","Brand","src","logo","alt","Header","server","axios","create","baseURL","useResource","url","defaultData","data","setData","error","setError","isLoading","setIsLoading","a","get","response","console","message","SongSearch","search","setSearch","type","placeholder","value","onChange","e","target","PageButtons","page","pagesNum","setPage","pages","i","key","SongRow","song","title","author","tags","filter","t","match","join","href","rel","SongsTable","songs","map","s","_id","Tags","exclude","this","inp","val","input","toLowerCase","includes","x","tag","_addItem","removeExclude","removeTag","_removeItem","SongTags","setTags","setExclude","T","activeCat","setActiveCat","catButtons","buttonClasses","showArchived","setShowArchived","getCatClasses","c","addTag","addExclude","getTags","getExclude","handleCatClick","Sticky","stuck","setStuck","offset","setOffset","element","offsetHeight","handleScroll","window","scrollY","addEventListener","removeEventListener","ref","children","height","Limiter","setLimit","limitButtons","limit","p","SongsControls","state","dispatch","payload","reducer","isPending","Loader","loading","SongsList","initialState","useReducer","useSongListReducer","searchInput","setSearchInput","setIsPending","timer","setTimer","useMemo","length","count","string","clearTimeout","setTimeout","Math","ceil","Home","ServicesTable","services","width","format","Date","date","useListReducer","options","log","item","ADD","REMOVE","CLEAR","SongSelector","open","setOpen","onSelect","ServiceForm","setDate","resource","searchSongs","onSubmit","preventDefault","required","onDismiss","ModalHeader","aria-hidden","ModalFooter","footer","Modal","display","setDisplay","show","setShow","isOpen","classList","add","transitionIn","transitionOut","remove","ReactDOM","createPortal","large","small","stopPropagation","ServicesList","isModalOpen","setIsModalOpen","isSubmitting","setIsSubmitting","submitError","setSubmitError","formValues","post","CategoryButtons","categoryButtons","setCategory","label","category","RangeButtons","r","setRange","range","MetricControls","MetricsTableHead","sortBy","isAsc","sortSincePlayed","b","aWeeks","metrics","weeksSincePlayed","bWeeks","sortPlays","plays","today","MetricsTableBody","arr","avPlays","sort","compareDesc","differenceInCalendarWeeks","getWeeksSincePlayed","reduce","acc","find","cat","MetricsTable","Metrics","useMetricsReducer","useResources","Footer","App","Fragment","path","component","exact","React","Component","render"],"mappings":"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","file":"static/js/main.1aa44ca0.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/logo.f48b0626.jpg\";","import { createBrowserHistory } from \"history\";\r\n\r\nexport const history = createBrowserHistory();\r\n","import React from \"react\";\r\nimport \"./Hamburger.scss\";\r\n\r\nconst Hamburger = props => {\r\n\treturn (\r\n\t\t<div className=\"hamburger\" onClick={() => props.onClick()}>\r\n\t\t\t<div />\r\n\t\t\t<div />\r\n\t\t\t<div />\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default Hamburger;\r\n","import { useEffect, useRef } from \"react\";\r\n\r\nconst useBodyScrollLock = dependency => {\r\n\tconst body = useRef(document.querySelector(\"body\")).current;\r\n\tuseEffect(() => {\r\n\t\tif (dependency) {\r\n\t\t\tbody.style = \"overflow:hidden;\";\r\n\t\t}\r\n\t\tif (!dependency) {\r\n\t\t\tbody.style = \"\";\r\n\t\t}\r\n\t\treturn () => (body.style = \"\");\r\n\t}, [dependency, body.style]);\r\n};\r\n\r\nexport default useBodyScrollLock;\r\n","import React, { useState } from \"react\";\r\nimport Hamburger from \"./Hamburger\";\r\nimport useBodyScrollLock from \"../../hooks/useBodyScrollLock\";\r\nimport { history } from \"../../utils\";\r\nimport \"./Nav.scss\";\r\nconst Nav = props => {\r\n\tconst [isNavOpen, setIsNavOpen] = useState(\"\");\r\n\tuseBodyScrollLock(isNavOpen);\r\n\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t<Hamburger onClick={() => setIsNavOpen(\" open\")} />\r\n\t\t\t<nav>\r\n\t\t\t\t<div\r\n\t\t\t\t\tclassName={`nav-container${isNavOpen}`}\r\n\t\t\t\t\tonClick={() => setIsNavOpen(\"\")}\r\n\t\t\t\t>\r\n\t\t\t\t\t<div className={`nav-slider${isNavOpen}`}>\r\n\t\t\t\t\t\t<i className=\"ui delete icon\" />\r\n\t\t\t\t\t\t<ul>\r\n\t\t\t\t\t\t\t<li onClick={() => history.push(\"/\")}>Songs</li>\r\n\t\t\t\t\t\t\t<li onClick={() => history.push(\"/metrics\")}>Metrics</li>\r\n\t\t\t\t\t\t\t<li onClick={() => history.push(\"/services\")}>Services</li>\r\n\t\t\t\t\t\t</ul>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</nav>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default Nav;\r\n","import React from \"react\";\r\nimport logo from \"./logo.jpg\";\r\nimport \"./Brand.scss\";\r\n\r\nconst Brand = props => {\r\n\treturn (\r\n\t\t<div className=\"brand\">\r\n\t\t\t<img src={logo} alt=\"Graceville Presbyterian Church\" />\r\n\t\t</div>\r\n\t);\r\n};\r\nexport default Brand;\r\n","import React from \"react\";\r\nimport Nav from \"../nav/Nav\";\r\nimport Brand from \"./Brand\";\r\nimport \"./Header.scss\";\r\n\r\nconst Header = props => (\r\n\t<header>\r\n\t\t<div className=\"container\">\r\n\t\t\t<Brand />\r\n\t\t\t<Nav />\r\n\t\t</div>\r\n\t</header>\r\n);\r\n\r\nexport default Header;\r\n","import axios from \"axios\";\r\nconst server = axios.create({\r\n\tbaseURL: \"/api/v1\"\r\n});\r\n\r\nexport default server;\r\n","import { useEffect, useState } from \"react\";\r\nimport server from \"../apis/server\";\r\nexport default function useResource(url, defaultData) {\r\n\tconst [data, setData] = useState(defaultData);\r\n\tconst [error, setError] = useState(null);\r\n\tconst [isLoading, setIsLoading] = useState(false);\r\n\r\n\tuseEffect(() => {\r\n\t\tif (!url) return;\r\n\t\t(async () => {\r\n\t\t\tsetIsLoading(true);\r\n\t\t\ttry {\r\n\t\t\t\tconst response = await server.get(url);\r\n\t\t\t\tsetData(response.data);\r\n\t\t\t} catch (e) {\r\n\t\t\t\tconsole.error(e);\r\n\t\t\t\tlet message = e.response ? e.response.data.message : e.message;\r\n\t\t\t\tsetError(message);\r\n\t\t\t}\r\n\t\t\tsetIsLoading(false);\r\n\t\t})();\r\n\t}, [url]);\r\n\treturn [url ? data : defaultData, error, isLoading];\r\n}\r\n","import React from \"react\";\r\n\r\nconst SongSearch = ({ search, setSearch }) => {\r\n\treturn (\r\n\t\t<div className=\"my-3\">\r\n\t\t\t<input\r\n\t\t\t\ttype=\"text\"\r\n\t\t\t\tclassName=\"form-control \"\r\n\t\t\t\tplaceholder=\"Search title or author...\"\r\n\t\t\t\tvalue={search}\r\n\t\t\t\tonChange={e => setSearch(e.target.value)}\r\n\t\t\t/>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default SongSearch;\r\n","import React from \"react\";\r\n\r\nconst PageButtons = ({ page, pagesNum, setPage }) => {\r\n\tif (pagesNum < 2) return null;\r\n\tlet pages = [];\r\n\tfor (let i = 1; i <= pagesNum; i++) {\r\n\t\tpages.push(\r\n\t\t\t<button\r\n\t\t\t\tclassName={`btn btn-sm no-glow btn-outline-secondary${\r\n\t\t\t\t\ti === page + 1 ? \" active\" : \"\"\r\n\t\t\t\t}`}\r\n\t\t\t\tonClick={() => setPage(i - 1)}\r\n\t\t\t\tkey={i}\r\n\t\t\t>\r\n\t\t\t\t{i}\r\n\t\t\t</button>\r\n\t\t);\r\n\t}\r\n\treturn (\r\n\t\t<div className=\"d-flex justify-content-center\">\r\n\t\t\t<div className=\"btn-group btn-group-toggle\">{pages}</div>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default PageButtons;\r\n","import React from \"react\";\r\nimport \"./SongRow.scss\";\r\n\r\nconst SongRow = ({ song }) => {\r\n\treturn (\r\n\t\t<tr className=\"song-row\">\r\n\t\t\t<td>{song.title}</td>\r\n\t\t\t<td>{song.author}</td>\r\n\t\t\t<td>{song.key}</td>\r\n\t\t\t<td>\r\n\t\t\t\t{song.tags\r\n\t\t\t\t\t.filter(t => !t.match(/category a/i) && !t.match(/category b/i))\r\n\t\t\t\t\t.join(\", \")}\r\n\t\t\t</td>\r\n\t\t\t<td>\r\n\t\t\t\t<a href={song.url} target=\"_blank\" rel=\"noopener noreferrer\">\r\n\t\t\t\t\t<i className=\"ui youtube icon\" />\r\n\t\t\t\t</a>\r\n\t\t\t</td>\r\n\t\t</tr>\r\n\t);\r\n};\r\n\r\nexport default SongRow;\r\n","import React from \"react\";\r\nimport SongRow from \"./SongRow\";\r\nimport \"./SongsTable.scss\";\r\n\r\nconst SongsTable = ({ songs }) => {\r\n\treturn (\r\n\t\t<table className=\"table songs-table\">\r\n\t\t\t<thead className=\"\">\r\n\t\t\t\t<tr>\r\n\t\t\t\t\t<th>Title</th>\r\n\t\t\t\t\t<th>\r\n\t\t\t\t\t\t<i className=\"ui user icon\" />\r\n\t\t\t\t\t</th>\r\n\t\t\t\t\t<th>\r\n\t\t\t\t\t\t<i className=\"ui key icon\" />\r\n\t\t\t\t\t</th>\r\n\t\t\t\t\t<th>\r\n\t\t\t\t\t\t<i className=\"ui tags icon\" />\r\n\t\t\t\t\t</th>\r\n\t\t\t\t\t<th>\r\n\t\t\t\t\t\t<i className=\"ui chain icon\" />\r\n\t\t\t\t\t</th>\r\n\t\t\t\t</tr>\r\n\t\t\t</thead>\r\n\t\t\t<tbody>\r\n\t\t\t\t{songs.map(s => (\r\n\t\t\t\t\t<SongRow key={s._id} song={s} />\r\n\t\t\t\t))}\r\n\t\t\t</tbody>\r\n\t\t</table>\r\n\t);\r\n};\r\nexport default SongsTable;\r\n","class Tags {\r\n\tconstructor(tags, exclude) {\r\n\t\tthis.tags = tags;\r\n\t\tthis.exclude = exclude;\r\n\t}\r\n\t_addItem(inp, val) {\r\n\t\tlet input = inp.toLowerCase();\r\n\t\tif (!this[val].includes(input)) this[val] = [...this[val], input];\r\n\t}\r\n\t_removeItem(inp, val) {\r\n\t\tlet input = inp.toLowerCase();\r\n\t\tthis[val] = this[val].filter(x => x !== input);\r\n\t}\r\n\taddTag(tag) {\r\n\t\tthis._addItem(tag, \"tags\");\r\n\t\tthis.removeExclude(tag);\r\n\t\treturn this;\r\n\t}\r\n\taddExclude(exclude) {\r\n\t\tthis._addItem(exclude, \"exclude\");\r\n\t\tthis.removeTag(exclude);\r\n\t\treturn this;\r\n\t}\r\n\tremoveTag(tag) {\r\n\t\tthis._removeItem(tag, \"tags\");\r\n\t\treturn this;\r\n\t}\r\n\tremoveExclude(exclude) {\r\n\t\tthis._removeItem(exclude, \"exclude\");\r\n\t\treturn this;\r\n\t}\r\n\tgetTags() {\r\n\t\treturn this.tags;\r\n\t}\r\n\tgetExclude() {\r\n\t\treturn this.exclude;\r\n\t}\r\n}\r\n\r\nexport default Tags;\r\n","import React, { useState } from \"react\";\r\nimport Tags from \"./Tags\";\r\n\r\nconst SongTags = ({ tags, setTags, exclude, setExclude }) => {\r\n\tconst T = new Tags(tags, exclude);\r\n\tconst [activeCat, setActiveCat] = useState(\"Category A\");\r\n\tconst catButtons = [\"Category A\", \"Category B (Hymn)\"];\r\n\tconst buttonClasses = \"btn btn-outline-primary no-glow btn-sm\";\r\n\tconst [showArchived, setShowArchived] = useState(\"\");\r\n\r\n\tfunction getCatClasses(c) {\r\n\t\treturn activeCat === c ? buttonClasses + \" active\" : buttonClasses;\r\n\t}\r\n\tfunction handleCatClick(c) {\r\n\t\tsetActiveCat(c);\r\n\t\tT.addTag(c).addExclude(c === catButtons[0] ? catButtons[1] : catButtons[0]);\r\n\t\tsetTags(T.getTags());\r\n\t\tsetExclude(T.getExclude());\r\n\t}\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t<div className=\"btn-group btn-group-toggle mr-2\">\r\n\t\t\t\t{catButtons.map((c, i) => (\r\n\t\t\t\t\t<button\r\n\t\t\t\t\t\tclassName={getCatClasses(c)}\r\n\t\t\t\t\t\tonClick={() => handleCatClick(c)}\r\n\t\t\t\t\t\tkey={i}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t{c}\r\n\t\t\t\t\t</button>\r\n\t\t\t\t))}\r\n\t\t\t</div>\r\n\t\t\t<button\r\n\t\t\t\tclassName={buttonClasses + showArchived}\r\n\t\t\t\tonClick={() => {\r\n\t\t\t\t\tif (!showArchived) {\r\n\t\t\t\t\t\tsetShowArchived(\" active\");\r\n\t\t\t\t\t\tsetTags(T.addTag(\"archived\").getTags());\r\n\t\t\t\t\t\tsetExclude(T.getExclude());\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tsetShowArchived(\"\");\r\n\t\t\t\t\t\tsetTags(T.addExclude(\"archived\").getTags());\r\n\t\t\t\t\t\tsetExclude(T.getExclude());\r\n\t\t\t\t\t}\r\n\t\t\t\t}}\r\n\t\t\t>\r\n\t\t\t\t<i className=\"ui archive icon\" /> Archived\r\n\t\t\t</button>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default SongTags;\r\n","import React, { useState, useEffect, useRef } from \"react\";\r\nimport \"./Sticky.scss\";\r\n\r\nfunction Sticky(props) {\r\n\tconst [stuck, setStuck] = useState(\"\");\r\n\tconst [offset, setOffset] = useState(0);\r\n\tconst element = useRef(null);\r\n\r\n\tuseEffect(() => {\r\n\t\tsetOffset(element.current.offsetHeight);\r\n\t}, []);\r\n\r\n\tuseEffect(() => {\r\n\t\tfunction handleScroll() {\r\n\t\t\twindow.scrollY > offset ? setStuck(\" stuck\") : setStuck(\"\");\r\n\t\t}\r\n\t\tif (offset) {\r\n\t\t\tdocument.addEventListener(\"scroll\", handleScroll);\r\n\t\t}\r\n\t\treturn () => document.removeEventListener(\"scroll\", handleScroll);\r\n\t}, [offset]);\r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<div className={`sticky${stuck}`} ref={element}>\r\n\t\t\t\t{typeof props.children === \"function\"\r\n\t\t\t\t\t? props.children(stuck)\r\n\t\t\t\t\t: props.children}\r\n\t\t\t</div>\r\n\t\t\t{stuck && <div style={{ height: offset }} />}\r\n\t\t</>\r\n\t);\r\n}\r\n\r\nexport default Sticky;\r\n","import React from \"react\";\r\nconst Limiter = ({ setLimit, limitButtons, setPage, limit }) => {\r\n\tfunction onClick(v) {\r\n\t\tsetLimit(v);\r\n\t\tsetPage(0);\r\n\t}\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t<span className=\"mr-2\">Limit: </span>\r\n\t\t\t<div className=\"btn-group btn-group-toggle\">\r\n\t\t\t\t{limitButtons.map((p, i) => (\r\n\t\t\t\t\t<button\r\n\t\t\t\t\t\tclassName={`btn btn-sm no-glow btn-outline-secondary${\r\n\t\t\t\t\t\t\tlimit === p ? \" active\" : \"\"\r\n\t\t\t\t\t\t}`}\r\n\t\t\t\t\t\tkey={i}\r\n\t\t\t\t\t\tonClick={() => onClick(p)}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t{p}\r\n\t\t\t\t\t</button>\r\n\t\t\t\t))}\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default Limiter;\r\n","import React from \"react\";\r\nimport SongTags from \"./SongTags\";\r\nimport Sticky from \"../util_components/Sticky\";\r\nimport Limiter from \"../util_components/Limiter\";\r\nimport \"./SongsControls.scss\";\r\n\r\nconst SongsControls = ({ state, dispatch }) => {\r\n\tconst { tags, exclude, limit } = state;\r\n\treturn (\r\n\t\t<Sticky>\r\n\t\t\t{stuck => (\r\n\t\t\t\t<section className={`songs-controls${stuck}`}>\r\n\t\t\t\t\t<div className={stuck ? \"container\" : \"\"}>\r\n\t\t\t\t\t\t<SongTags\r\n\t\t\t\t\t\t\ttags={tags}\r\n\t\t\t\t\t\t\tsetTags={payload => dispatch({ type: \"SET_TAGS\", payload })}\r\n\t\t\t\t\t\t\texclude={exclude}\r\n\t\t\t\t\t\t\tsetExclude={payload => dispatch({ type: \"SET_EXCLUDE\", payload })}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t<Limiter\r\n\t\t\t\t\t\t\tlimit={limit}\r\n\t\t\t\t\t\t\tsetLimit={payload => dispatch({ type: \"SET_LIMIT\", payload })}\r\n\t\t\t\t\t\t\tsetPage={payload => dispatch({ type: \"SET_PAGE\", payload })}\r\n\t\t\t\t\t\t\tlimitButtons={[10, 30, 50, 100, \"All\"]}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</section>\r\n\t\t\t)}\r\n\t\t</Sticky>\r\n\t);\r\n};\r\n\r\nexport default SongsControls;\r\n","import { useReducer } from \"react\";\r\n\r\nconst reducer = (state, { type, payload }) => {\r\n\tswitch (type) {\r\n\t\tcase \"SET_LIMIT\":\r\n\t\t\treturn { ...state, limit: payload };\r\n\t\tcase \"SET_PAGE\":\r\n\t\t\treturn { ...state, page: payload };\r\n\t\tcase \"SET_TAGS\":\r\n\t\t\treturn { ...state, tags: payload };\r\n\t\tcase \"SET_EXCLUDE\":\r\n\t\t\treturn { ...state, exclude: payload };\r\n\t\tcase \"SET_SEARCH\":\r\n\t\t\treturn { ...state, search: payload };\r\n\t\tcase \"SET_IS_PENDING\":\r\n\t\t\treturn { ...state, isPending: payload };\r\n\t\tdefault:\r\n\t\t\treturn state;\r\n\t}\r\n};\r\nexport default initialState => useReducer(reducer, initialState);\r\n","import React from \"react\";\r\nimport \"./Loader.scss\";\r\nconst Loader = props => {\r\n\tif (!props.loading) return props.children;\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t<div className=\"loader\">\r\n\t\t\t\t<div />\r\n\t\t\t</div>\r\n\t\t\t{props.children}\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default Loader;\r\n","import React, { useState, useMemo } from \"react\";\r\nimport useResource from \"../../hooks/useResource\";\r\nimport SongSearch from \"./SongSearch\";\r\nimport PageButtons from \"../util_components/PageButtons\";\r\nimport SongsTable from \"./SongsTable\";\r\nimport SongsControls from \"./SongsControls\";\r\nimport useSongListReducer from \"./useSongListReducer\";\r\nimport Loader from \"../util_components/Loader\";\r\n\r\nconst SongsList = props => {\r\n\tconst initialState = {\r\n\t\tlimit: 50,\r\n\t\tpage: 0,\r\n\t\ttags: [\"category a\"],\r\n\t\texclude: [\"archived\", \"deleted\"],\r\n\t\tsearch: \"\"\r\n\t};\r\n\tconst [state, dispatch] = useSongListReducer(initialState);\r\n\tconst { limit, page, tags, exclude, search } = state;\r\n\tconst [searchInput, setSearchInput] = useState(\"\");\r\n\tconst [isPending, setIsPending] = useState(false);\r\n\tconst [timer, setTimer] = useState(null);\r\n\r\n\tconst url = useMemo(() => {\r\n\t\tlet url = `/songs?limit=${limit}`;\r\n\t\tif (typeof limit === \"number\") url += `&skip=${limit * page}`;\r\n\t\tif (tags.length) url += `&tags=${tags.map(t => t.toLowerCase()).join(\",\")}`;\r\n\t\tif (exclude.length)\r\n\t\t\turl += `&exclude=${exclude.map(t => t.toLowerCase()).join(\",\")}`;\r\n\t\tif (search) url += `&search=${search}`;\r\n\t\treturn url;\r\n\t}, [limit, page, tags, exclude, search]);\r\n\r\n\tconst [{ count, songs }, error, isLoading] = useResource(url, {\r\n\t\tcount: 0,\r\n\t\tsongs: []\r\n\t});\r\n\r\n\tfunction setSearchDelayed(string) {\r\n\t\tsetIsPending(true);\r\n\t\tsetSearchInput(string);\r\n\t\tclearTimeout(timer);\r\n\t\tsetTimer(\r\n\t\t\tsetTimeout(() => {\r\n\t\t\t\tdispatch({ type: \"SET_SEARCH\", payload: string });\r\n\t\t\t\tsetIsPending(false);\r\n\t\t\t}, 200)\r\n\t\t);\r\n\t}\r\n\r\n\treturn (\r\n\t\t<section className=\"songs-list relative my-3\">\r\n\t\t\t<SongsControls state={state} dispatch={dispatch} />\r\n\t\t\t<SongSearch search={searchInput} setSearch={setSearchDelayed} />\r\n\t\t\t{error && <p className=\"alert alert-danger my-2 p-2\">{error}</p>}\r\n\t\t\t<div className=\"relative\">\r\n\t\t\t\t<Loader loading={isLoading || isPending}>\r\n\t\t\t\t\t<SongsTable songs={songs} />\r\n\t\t\t\t</Loader>\r\n\t\t\t</div>\r\n\t\t\t<PageButtons\r\n\t\t\t\tpage={page}\r\n\t\t\t\tpagesNum={Math.ceil(count / limit)}\r\n\t\t\t\tsetPage={payload => dispatch({ type: \"SET_PAGE\", payload })}\r\n\t\t\t/>\r\n\t\t</section>\r\n\t);\r\n};\r\n\r\nexport default SongsList;\r\n","import React from \"react\";\r\nimport SongsList from \"../songs/SongsList\";\r\nimport \"./Home.scss\";\r\n\r\nconst Home = props => (\r\n\t<div className=\"container py-3\">\r\n\t\t<SongsList />\r\n\t</div>\r\n);\r\n\r\nexport default Home;\r\n","import React from \"react\";\r\nimport { format } from \"date-fns\";\r\nimport \"./ServicesTable.scss\";\r\n\r\nfunction ServicesTable(props) {\r\n\treturn (\r\n\t\t<table className=\"table services-table\">\r\n\t\t\t<tbody>\r\n\t\t\t\t{props.services.map(s => {\r\n\t\t\t\t\treturn (\r\n\t\t\t\t\t\t<tr key={s._id}>\r\n\t\t\t\t\t\t\t<td style={{ width: \"60%\" }}>\r\n\t\t\t\t\t\t\t\t{format(new Date(s.date), \"dd/MM/yyyy\")}\r\n\t\t\t\t\t\t\t\t<ol>\r\n\t\t\t\t\t\t\t\t\t{s.songs.map((s, i) => (\r\n\t\t\t\t\t\t\t\t\t\t<li key={i}>{s.title}</li>\r\n\t\t\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t\t\t</ol>\r\n\t\t\t\t\t\t\t</td>\r\n\t\t\t\t\t\t\t<td>\r\n\t\t\t\t\t\t\t\t{s.tags && (\r\n\t\t\t\t\t\t\t\t\t<ul>\r\n\t\t\t\t\t\t\t\t\t\t{s.tags.map((t, i) => (\r\n\t\t\t\t\t\t\t\t\t\t\t<li key={i}>{t}</li>\r\n\t\t\t\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t\t\t\t</ul>\r\n\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t</td>\r\n\t\t\t\t\t\t</tr>\r\n\t\t\t\t\t);\r\n\t\t\t\t})}\r\n\t\t\t</tbody>\r\n\t\t</table>\r\n\t);\r\n}\r\n\r\nexport default ServicesTable;\r\n","import { useReducer } from \"react\";\r\n\r\nfunction useListReducer(initialState = [], options = {}) {\r\n\tfunction reducer(state, { type, payload }) {\r\n\t\tconsole.log(state);\r\n\t\tswitch (type) {\r\n\t\t\tcase \"ADD\":\r\n\t\t\t\treturn [...state, payload];\r\n\t\t\tcase \"REMOVE\":\r\n\t\t\t\tconsole.log(payload);\r\n\t\t\t\treturn state.filter((item, i) =>\r\n\t\t\t\t\toptions.target ? item[options.target] !== payload : i !== payload\r\n\t\t\t\t);\r\n\t\t\tcase \"CLEAR\":\r\n\t\t\t\treturn [];\r\n\t\t\tdefault:\r\n\t\t\t\treturn state;\r\n\t\t}\r\n\t}\r\n\tconst actions = {\r\n\t\tADD: \"ADD\",\r\n\t\tREMOVE: \"REMOVE\",\r\n\t\tCLEAR: \"CLEAR\"\r\n\t};\r\n\tconst [state, dispatch] = useReducer(reducer, initialState);\r\n\r\n\treturn [state, dispatch, actions];\r\n}\r\n\r\nexport default useListReducer;\r\n","import React, { useState, useEffect } from \"react\";\r\nimport Loader from \"../util_components/Loader\";\r\nimport \"./SongSelector.scss\";\r\n\r\nfunction SongSelector(props) {\r\n\tconst [open, setOpen] = useState(\" open\");\r\n\tuseEffect(() => {\r\n\t\tprops.songs.length || props.isLoading ? setOpen(\" open\") : setOpen(\"\");\r\n\t}, [props.songs, props.isLoading]);\r\n\r\n\tfunction onSelect(song) {\r\n\t\tprops.onSelect(song);\r\n\t\tsetOpen(\"\");\r\n\t}\r\n\treturn (\r\n\t\t<div className={`song-selector${open}`}>\r\n\t\t\t<Loader loading={props.isLoading}>\r\n\t\t\t\t<div className=\"song-selector-container\">\r\n\t\t\t\t\t{props.songs.map(s => (\r\n\t\t\t\t\t\t<div key={s._id} onClick={() => onSelect(s)}>\r\n\t\t\t\t\t\t\t{s.title}\r\n\t\t\t\t\t\t\t<i className=\"ui plus icon\" />\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t))}\r\n\t\t\t\t</div>\r\n\t\t\t</Loader>\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nexport default SongSelector;\r\n","import React, { useState, useMemo } from \"react\";\r\nimport useListReducer from \"../../hooks/useListReducer\";\r\nimport useResource from \"../../hooks/useResource\";\r\nimport SongSelector from \"./SongSelector\";\r\nimport \"./ServiceForm.scss\";\r\n\r\nfunction ServiceForm(props) {\r\n\tconst [search, setSearch] = useState(\"\");\r\n\tconst [songs, dispatch, a] = useListReducer([], { target: \"_id\" });\r\n\tconst [date, setDate] = useState(\"\");\r\n\tconst url = useMemo(() => {\r\n\t\tif (search.length < 3) return null;\r\n\t\treturn `/songs?limit=5&search=${search}`;\r\n\t}, [search]);\r\n\tconst [resource, error, isLoading] = useResource(url);\r\n\tconst searchSongs = resource ? resource.songs : [];\r\n\r\n\tfunction onSubmit(e) {\r\n\t\te.preventDefault();\r\n\t\tprops.onSubmit({ songs, date });\r\n\t}\r\n\r\n\treturn (\r\n\t\t<form onSubmit={onSubmit} className=\"service-form container\">\r\n\t\t\t{error && <div className=\"alert alert-danger\">{error}</div>}\r\n\t\t\t<section className=\"form-group\">\r\n\t\t\t\t<label>Date</label>\r\n\t\t\t\t<input\r\n\t\t\t\t\tclassName=\"form-control\"\r\n\t\t\t\t\ttype=\"date\"\r\n\t\t\t\t\trequired\r\n\t\t\t\t\tvalue={date}\r\n\t\t\t\t\tonChange={e => setDate(e.target.value)}\r\n\t\t\t\t/>\r\n\t\t\t</section>\r\n\r\n\t\t\t<section>\r\n\t\t\t\t<label>Songs</label>\r\n\t\t\t\t{songs.length ? (\r\n\t\t\t\t\t<ol className=\"songs-list\">\r\n\t\t\t\t\t\t{songs.map(({ title, _id }) => (\r\n\t\t\t\t\t\t\t<li key={_id}>\r\n\t\t\t\t\t\t\t\t{title}\r\n\t\t\t\t\t\t\t\t<button className=\"btn btn-sm btn-outline-danger\">\r\n\t\t\t\t\t\t\t\t\t<i\r\n\t\t\t\t\t\t\t\t\t\tclassName=\"ui trash icon\"\r\n\t\t\t\t\t\t\t\t\t\tonClick={() => dispatch({ type: a.REMOVE, payload: _id })}\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t))}\r\n\t\t\t\t\t</ol>\r\n\t\t\t\t) : (\r\n\t\t\t\t\t<div className=\"alert alert-info\">No songs added</div>\r\n\t\t\t\t)}\r\n\t\t\t</section>\r\n\t\t\t<section className=\"search form-group\">\r\n\t\t\t\t<input\r\n\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\tvalue={search}\r\n\t\t\t\t\tonChange={e => setSearch(e.target.value)}\r\n\t\t\t\t\tclassName=\"form-control\"\r\n\t\t\t\t\tplaceholder=\"Search songs...\"\r\n\t\t\t\t/>\r\n\t\t\t\t<SongSelector\r\n\t\t\t\t\tsongs={searchSongs}\r\n\t\t\t\t\tisLoading={isLoading}\r\n\t\t\t\t\tonSelect={s => dispatch({ type: a.ADD, payload: s })}\r\n\t\t\t\t/>\r\n\t\t\t</section>\r\n\t\t\t<section className=\"d-flex justify-content-end\">\r\n\t\t\t\t<button className=\"btn btn-sm btn-outline-primary mr-2\">Save</button>\r\n\t\t\t\t<button\r\n\t\t\t\t\ttype=\"button\"\r\n\t\t\t\t\tonClick={props.onDismiss}\r\n\t\t\t\t\tclassName=\"btn btn-sm btn-outline-info mr-2\"\r\n\t\t\t\t>\r\n\t\t\t\t\tCancel\r\n\t\t\t\t</button>\r\n\t\t\t\t<button\r\n\t\t\t\t\ttype=\"button\"\r\n\t\t\t\t\tonClick={() => dispatch({ type: a.CLEAR })}\r\n\t\t\t\t\tclassName=\"btn btn-sm btn-outline-secondary\"\r\n\t\t\t\t>\r\n\t\t\t\t\tClear\r\n\t\t\t\t</button>\r\n\t\t\t</section>\r\n\t\t</form>\r\n\t);\r\n}\r\n\r\nexport default ServiceForm;\r\n","import React from \"react\";\r\n\r\nconst ModalHeader = ({ title, onDismiss }) => {\r\n\treturn (\r\n\t\t<div className={title ? \"modal-header\" : \"container-fluid p-2\"}>\r\n\t\t\t{title && <h5 className=\"modal-title\">{title}</h5>}\r\n\t\t\t<button type=\"button\" className=\"close\" onClick={onDismiss}>\r\n\t\t\t\t<span aria-hidden=\"true\">&times;</span>\r\n\t\t\t</button>\r\n\t\t</div>\r\n\t);\r\n};\r\nexport default ModalHeader;\r\n","import React from \"react\";\r\n\r\nconst ModalFooter = ({ footer }) => {\r\n\treturn footer ? <div className=\"modal-footer\">{footer}</div> : null;\r\n};\r\n\r\nexport default ModalFooter;\r\n","import React, { useState, useEffect } from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport ModalHeader from \"./ModalHeader\";\r\nimport ModalFooter from \"./ModalFooter\";\r\n\r\n/* \r\n\tModal component using bootstrap classes but without jquery.\r\n\tRequired props: isOpen (bool), onDismiss (function)\r\n\tOptional props: children, title, footer, large, small\r\n*/\r\nconst Modal = props => {\r\n\tconst body = document.querySelector(\"body\");\r\n\tconst [display, setDisplay] = useState(\"none\");\r\n\tconst [show, setShow] = useState(\"\");\r\n\r\n\tuseEffect(() => {\r\n\t\tif (props.isOpen) {\r\n\t\t\tbody.classList.add(\"modal-open\");\r\n\t\t\ttransitionIn();\r\n\t\t}\r\n\t\tif (!props.isOpen) {\r\n\t\t\ttransitionOut();\r\n\t\t\tbody.classList.remove(\"modal-open\");\r\n\t\t}\r\n\t\treturn () => body.classList.remove(\"modal-open\");\r\n\t}, [props.isOpen, body.classList]);\r\n\r\n\tconst transitionIn = () => {\r\n\t\tsetDisplay(\"block\");\r\n\t\tsetTimeout(() => {\r\n\t\t\tsetShow(\" show\");\r\n\t\t}, 50);\r\n\t};\r\n\r\n\tconst transitionOut = () => {\r\n\t\tsetShow(\"\");\r\n\t\tsetTimeout(() => {\r\n\t\t\tsetDisplay(\"none\");\r\n\t\t}, 100);\r\n\t};\r\n\r\n\tconst renderModal = () => (\r\n\t\t<div>\r\n\t\t\t<div className={`modal-backdrop fade${show}`} style={{ display }} />\r\n\t\t\t<div\r\n\t\t\t\tclassName={`modal fade${show}`}\r\n\t\t\t\tonClick={props.onDismiss}\r\n\t\t\t\tstyle={{ display }}\r\n\t\t\t>\r\n\t\t\t\t<div\r\n\t\t\t\t\tclassName={`modal-dialog modal-dialog-centered ${\r\n\t\t\t\t\t\tprops.large ? \"modal-lg\" : \"\"\r\n\t\t\t\t\t} ${props.small ? \"modal-sm\" : \"\"}`}\r\n\t\t\t\t\tonClick={e => e.stopPropagation()}\r\n\t\t\t\t>\r\n\t\t\t\t\t<div className=\"modal-content\" onSubmit={e => e.stopPropagation()}>\r\n\t\t\t\t\t\t<ModalHeader title={props.title} onDismiss={props.onDismiss} />\r\n\t\t\t\t\t\t<div className=\"modal-body\">{props.children}</div>\r\n\t\t\t\t\t\t<ModalFooter footer={props.footer} />\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n\treturn ReactDOM.createPortal(renderModal(), document.querySelector(\"#modal\"));\r\n};\r\n\r\nexport default Modal;\r\n","import React, { useState, useMemo } from \"react\";\r\nimport useResource from \"../../hooks/useResource\";\r\nimport PageButtons from \"../util_components/PageButtons\";\r\nimport ServicesTable from \"./ServicesTable\";\r\nimport ServiceForm from \"./ServiceForm\";\r\nimport Limiter from \"../util_components/Limiter\";\r\nimport Loader from \"../util_components/Loader\";\r\nimport Modal from \"../util_components/modal/Modal\";\r\nimport server from \"../../apis/server\";\r\n\r\nfunction ServicesList(props) {\r\n\tconst [limit, setLimit] = useState(10);\r\n\tconst [page, setPage] = useState(0);\r\n\tconst [isModalOpen, setIsModalOpen] = useState(false);\r\n\tconst [isSubmitting, setIsSubmitting] = useState(false);\r\n\tconst [submitError, setSubmitError] = useState(\"\");\r\n\r\n\tconst url = useMemo(() => {\r\n\t\tlet url = `/services?limit=${limit}`;\r\n\t\tif (typeof limit === \"number\") url += `&skip=${limit * page}`;\r\n\t\treturn url;\r\n\t}, [limit, page]);\r\n\r\n\tconst [{ count, services }, error, isLoading] = useResource(url, {\r\n\t\tcount: 0,\r\n\t\tservices: []\r\n\t});\r\n\r\n\tasync function onSubmit(formValues) {\r\n\t\tsetIsSubmitting(true);\r\n\t\ttry {\r\n\t\t\tconst response = await server.post(\"/services\", formValues);\r\n\t\t\tconsole.log(response);\r\n\t\t\t// console.log(\"placeholder\");\r\n\t\t} catch (e) {\r\n\t\t\tlet message = e.response ? e.response.data.message : e.message;\r\n\t\t\tsetSubmitError(message);\r\n\t\t}\r\n\t\tsetIsSubmitting(false);\r\n\t}\r\n\r\n\treturn (\r\n\t\t<section className=\"container relative py-3\">\r\n\t\t\t<h4>Services</h4>\r\n\t\t\t{error ||\r\n\t\t\t\t(submitError && (\r\n\t\t\t\t\t<p className=\"alert alert-danger my-2 p-2\">{error || submitError}</p>\r\n\t\t\t\t))}\r\n\t\t\t<div className=\"d-flex justify-content-between align-items-start\">\r\n\t\t\t\t<button\r\n\t\t\t\t\tclassName=\"btn btn-sm btn-outline-primary\"\r\n\t\t\t\t\tonClick={() => setIsModalOpen(true)}\r\n\t\t\t\t>\r\n\t\t\t\t\t<i className=\"ui plus icon\" /> Add Service\r\n\t\t\t\t</button>\r\n\t\t\t\t<Limiter\r\n\t\t\t\t\tlimit={limit}\r\n\t\t\t\t\tsetLimit={setLimit}\r\n\t\t\t\t\tsetPage={setPage}\r\n\t\t\t\t\tlimitButtons={[5, 10, 20]}\r\n\t\t\t\t/>\r\n\t\t\t</div>\r\n\t\t\t<div className=\"relative\">\r\n\t\t\t\t<Loader loading={isLoading || isSubmitting}>\r\n\t\t\t\t\t<ServicesTable services={services} />\r\n\t\t\t\t</Loader>\r\n\t\t\t</div>\r\n\t\t\t<PageButtons\r\n\t\t\t\tpage={page}\r\n\t\t\t\tpagesNum={Math.ceil(count / limit)}\r\n\t\t\t\tsetPage={setPage}\r\n\t\t\t/>\r\n\t\t\t<Modal\r\n\t\t\t\tisOpen={isModalOpen}\r\n\t\t\t\tonDismiss={() => setIsModalOpen(false)}\r\n\t\t\t\tlarge\r\n\t\t\t\ttitle=\"New Service\"\r\n\t\t\t>\r\n\t\t\t\t<ServiceForm\r\n\t\t\t\t\tonDismiss={() => setIsModalOpen(false)}\r\n\t\t\t\t\tonSubmit={onSubmit}\r\n\t\t\t\t/>\r\n\t\t\t</Modal>\r\n\t\t</section>\r\n\t);\r\n}\r\n\r\nexport default ServicesList;\r\n","import React from \"react\";\r\nfunction CategoryButtons(props) {\r\n\tconst categoryButtons = [\r\n\t\t[\"Category A\", () => props.setCategory(/Category A/i)],\r\n\t\t[\"Category B (Hymn)\", () => props.setCategory(/Category B/gi)]\r\n\t];\r\n\treturn (\r\n\t\t<div className=\"btn-group btn-group-toggle\">\r\n\t\t\t{categoryButtons.map(([label, onClick], i) => (\r\n\t\t\t\t<button\r\n\t\t\t\t\tkey={i}\r\n\t\t\t\t\ttype=\"button\"\r\n\t\t\t\t\tonClick={onClick}\r\n\t\t\t\t\tclassName={`btn btn-sm btn-outline-primary no-glow${\r\n\t\t\t\t\t\tlabel.match(props.category) ? \" active\" : \"\"\r\n\t\t\t\t\t}`}\r\n\t\t\t\t>\r\n\t\t\t\t\t{label}\r\n\t\t\t\t</button>\r\n\t\t\t))}\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nexport default CategoryButtons;\r\n","import React from \"react\";\r\n\r\nfunction RangeButtons(props) {\r\n\tconst rangeButtons = [\r\n\t\t[\"Total\", \"total\"],\r\n\t\t[\"2yrs\", \"2 years\"],\r\n\t\t[\"1yr\", \"1 year\"],\r\n\t\t[\"6mths\", \"6 months\"],\r\n\t\t[\"3mths\", \"3 months\"],\r\n\t\t[\"1mth\", \"1 month\"]\r\n\t];\r\n\treturn (\r\n\t\t<div className=\"btn-group btn-group-toggle\">\r\n\t\t\t{rangeButtons.map(([label, r], i) => (\r\n\t\t\t\t<button\r\n\t\t\t\t\tkey={i}\r\n\t\t\t\t\ttype=\"button\"\r\n\t\t\t\t\tonClick={() => props.setRange(r)}\r\n\t\t\t\t\tclassName={`btn btn-sm btn-outline-secondary no-glow${\r\n\t\t\t\t\t\tprops.range === r ? \" active\" : \"\"\r\n\t\t\t\t\t}`}\r\n\t\t\t\t>\r\n\t\t\t\t\t{label}\r\n\t\t\t\t</button>\r\n\t\t\t))}\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nexport default RangeButtons;\r\n","import React from \"react\";\r\nimport Sticky from \"../util_components/Sticky\";\r\nimport CategoryButtons from \"./CategoryButtons\";\r\nimport RangeButtons from \"./RangeButtons\";\r\nimport \"./MetricsControls.scss\";\r\n\r\nfunction MetricControls({ state, dispatch }) {\r\n\tconst { range, category } = state;\r\n\treturn (\r\n\t\t<Sticky>\r\n\t\t\t{stuck => (\r\n\t\t\t\t<div className={`metrics-controls${stuck ? \" stuck\" : \"\"}`}>\r\n\t\t\t\t\t<div className={stuck ? \"container\" : \"\"}>\r\n\t\t\t\t\t\t<CategoryButtons\r\n\t\t\t\t\t\t\tcategory={category}\r\n\t\t\t\t\t\t\tsetCategory={payload =>\r\n\t\t\t\t\t\t\t\tdispatch({ type: \"SET_CATEGORY\", payload })\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t<RangeButtons\r\n\t\t\t\t\t\t\trange={range}\r\n\t\t\t\t\t\t\tsetRange={payload => dispatch({ type: \"SET_RANGE\", payload })}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t)}\r\n\t\t</Sticky>\r\n\t);\r\n}\r\n\r\nexport default MetricControls;\r\n","import React from \"react\";\r\n\r\nfunction MetricsTableHead({ state, dispatch }) {\r\n\tconst { sortBy, isAsc } = state;\r\n\r\n\treturn (\r\n\t\t<thead>\r\n\t\t\t<tr>\r\n\t\t\t\t<th>Title</th>\r\n\t\t\t\t<th className=\"text-center\">Earliest Recorded Service</th>\r\n\t\t\t\t<th\r\n\t\t\t\t\tclassName=\"text-center sortable\"\r\n\t\t\t\t\tonClick={() =>\r\n\t\t\t\t\t\tdispatch(\r\n\t\t\t\t\t\t\tsortBy === \"PLAYS\"\r\n\t\t\t\t\t\t\t\t? { type: \"TOGGLE_IS_ASC\" }\r\n\t\t\t\t\t\t\t\t: { type: \"SET_SORT_BY\", payload: \"PLAYS\" }\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t}\r\n\t\t\t\t>\r\n\t\t\t\t\tPlays\r\n\t\t\t\t\t{sortBy === \"PLAYS\" && (\r\n\t\t\t\t\t\t<i className={`ui ${isAsc ? \"up\" : \"down\"} chevron icon ml-2`} />\r\n\t\t\t\t\t)}\r\n\t\t\t\t</th>\r\n\t\t\t\t<th\r\n\t\t\t\t\tclassName=\"text-right sortable\"\r\n\t\t\t\t\tonClick={() =>\r\n\t\t\t\t\t\tdispatch(\r\n\t\t\t\t\t\t\tsortBy === \"PLAYS\"\r\n\t\t\t\t\t\t\t\t? { type: \"SET_SORT_BY\", payload: \"WEEKS\" }\r\n\t\t\t\t\t\t\t\t: { type: \"TOGGLE_IS_ASC\" }\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t}\r\n\t\t\t\t>\r\n\t\t\t\t\tWks since played\r\n\t\t\t\t\t{sortBy !== \"PLAYS\" && (\r\n\t\t\t\t\t\t<i className={`ui ${isAsc ? \"down\" : \"up\"} chevron icon ml-2`} />\r\n\t\t\t\t\t)}\r\n\t\t\t\t</th>\r\n\t\t\t</tr>\r\n\t\t</thead>\r\n\t);\r\n}\r\n\r\nexport default MetricsTableHead;\r\n","import { useReducer } from \"react\";\r\nimport { differenceInCalendarWeeks, compareDesc } from \"date-fns\";\r\n\r\n// metrics reducer\r\nfunction reducer(state, { type, payload }) {\r\n\tswitch (type) {\r\n\t\tcase \"SET_RANGE\":\r\n\t\t\treturn { ...state, range: payload };\r\n\t\tcase \"SET_CATEGORY\":\r\n\t\t\treturn { ...state, category: payload };\r\n\t\tcase \"SET_SORT_BY\":\r\n\t\t\treturn { ...state, sortBy: payload };\r\n\t\tcase \"SET_IS_ASC\":\r\n\t\t\treturn { ...state, isAsc: payload };\r\n\t\tcase \"TOGGLE_IS_ASC\":\r\n\t\t\treturn { ...state, isAsc: !state.isAsc };\r\n\t\tcase \"SET_SONGS\":\r\n\t\t\treturn { ...state, songs: payload };\r\n\t\tdefault:\r\n\t\t\treturn state;\r\n\t}\r\n}\r\nexport function useMetricsReducer(initialState = {}) {\r\n\tconst [state, dispatch] = useReducer(reducer, initialState);\r\n\treturn [state, dispatch];\r\n}\r\n\r\n// Sort functions\r\nexport const sortSincePlayed = isAsc => (a, b) => {\r\n\tlet aWeeks = a.metrics.weeksSincePlayed;\r\n\tlet bWeeks = b.metrics.weeksSincePlayed;\r\n\taWeeks = typeof aWeeks === \"string\" ? 9999999 : aWeeks;\r\n\tbWeeks = typeof bWeeks === \"string\" ? 9999999 : bWeeks;\r\n\treturn isAsc ? bWeeks - aWeeks : aWeeks - bWeeks;\r\n};\r\nexport const sortPlays = (range, isAsc) => (a, b) =>\r\n\tisAsc\r\n\t\t? a.metrics.plays[range] - b.metrics.plays[range]\r\n\t\t: b.metrics.plays[range] - a.metrics.plays[range];\r\n\r\n// helper to get weeks since played\r\nconst today = new Date();\r\n\r\nexport function getWeeksSincePlayed(songs) {\r\n\treturn songs.map(song => {\r\n\t\tlet { services } = song;\r\n\t\tlet weeksSincePlayed;\r\n\t\tif (!services.length) {\r\n\t\t\tweeksSincePlayed = \"∞\";\r\n\t\t} else {\r\n\t\t\tservices = services.map(s => new Date(s.date));\r\n\t\t\tif (services.length > 1)\r\n\t\t\t\tservices = services.sort((a, b) => compareDesc(a, b));\r\n\t\t\tweeksSincePlayed = differenceInCalendarWeeks(today, services[0]);\r\n\t\t}\r\n\t\tsong.metrics.weeksSincePlayed = weeksSincePlayed;\r\n\t\treturn song;\r\n\t});\r\n}\r\n","import React from \"react\";\r\nimport { getWeeksSincePlayed, sortSincePlayed, sortPlays } from \"./helpers\";\r\nimport { format } from \"date-fns\";\r\nfunction MetricsTableBody({ state, dispatch }) {\r\n\tlet { sortBy, isAsc, songs, range, category } = state;\r\n\tsongs = getWeeksSincePlayed(songs);\r\n\r\n\tfunction sortSongs(arr) {\r\n\t\treturn sortBy === \"PLAYS\"\r\n\t\t\t? arr.sort(sortSincePlayed(isAsc)).sort(sortPlays(range, isAsc))\r\n\t\t\t: arr.sort(sortPlays(range, isAsc)).sort(sortSincePlayed(isAsc));\r\n\t}\r\n\tconst avPlays =\r\n\t\tsongs.reduce((acc, song) => acc + song.metrics.plays[range], 0) /\r\n\t\tsongs.length;\r\n\r\n\treturn (\r\n\t\t<tbody>\r\n\t\t\t{sortSongs(\r\n\t\t\t\tsongs.filter(s => s.tags.find(cat => cat.match(category)))\r\n\t\t\t).map((s, i) => (\r\n\t\t\t\t<tr\r\n\t\t\t\t\tkey={i}\r\n\t\t\t\t\tclassName={s.metrics.plays[range] < avPlays ? \"text-danger\" : \"\"}\r\n\t\t\t\t>\r\n\t\t\t\t\t<td>{s.title}</td>\r\n\t\t\t\t\t<td className=\"text-center\">\r\n\t\t\t\t\t\t{s.services.length\r\n\t\t\t\t\t\t\t? format(new Date(s.services[0].date), \"dd/MM/yyy\")\r\n\t\t\t\t\t\t\t: \"-\"}\r\n\t\t\t\t\t</td>\r\n\t\t\t\t\t<td className=\"text-center\">{s.metrics.plays[range]}</td>\r\n\t\t\t\t\t<td className=\"text-right\">{s.metrics.weeksSincePlayed}</td>\r\n\t\t\t\t</tr>\r\n\t\t\t))}\r\n\t\t</tbody>\r\n\t);\r\n}\r\n\r\nexport default MetricsTableBody;\r\n","import React from \"react\";\r\nimport MetricsTableHead from \"./MetricsTableHead\";\r\nimport MetricsTableBody from \"./MetricsTableBody\";\r\n\r\nfunction MetricsTable(props) {\r\n\treturn (\r\n\t\t<table className=\"table songs-table\">\r\n\t\t\t<MetricsTableHead {...props} />\r\n\t\t\t<MetricsTableBody {...props} />\r\n\t\t</table>\r\n\t);\r\n}\r\n\r\nexport default MetricsTable;\r\n","import React, { useEffect } from \"react\";\r\nimport useResources from \"../../hooks/useResource\";\r\nimport Loader from \"../util_components/Loader\";\r\nimport MetricsControls from \"./MetricsControls\";\r\nimport MetricsTable from \"./MetricsTable\";\r\nimport { useMetricsReducer } from \"./helpers\";\r\nimport \"./Metrics.scss\";\r\n\r\n// Functional component\r\nfunction Metrics(props) {\r\n\tconst initialState = {\r\n\t\trange: \"6 months\",\r\n\t\tcategory: /Category A/i,\r\n\t\tsortBy: \"PLAYS\",\r\n\t\tisAsc: false,\r\n\t\tsongs: []\r\n\t};\r\n\r\n\tconst [state, dispatch] = useMetricsReducer(initialState);\r\n\r\n\tlet [{ songs }, error, isLoading] = useResources(\"/songs/metrics\", {\r\n\t\tsongs: [],\r\n\t\tcount: 0\r\n\t});\r\n\tuseEffect(() => {\r\n\t\tdispatch({ type: \"SET_SONGS\", payload: songs });\r\n\t}, [songs, dispatch]);\r\n\r\n\treturn (\r\n\t\t<section className=\"metrics container py-3 relative\">\r\n\t\t\t<MetricsControls state={state} dispatch={dispatch} />\r\n\t\t\t<Loader loading={isLoading}>\r\n\t\t\t\t{error && <div className=\"alert alert-danger\">{error}</div>}\r\n\t\t\t\t<MetricsTable state={state} dispatch={dispatch} />\r\n\t\t\t</Loader>\r\n\t\t</section>\r\n\t);\r\n}\r\n\r\nexport default Metrics;\r\n","import React from \"react\";\r\nimport \"./Footer.scss\";\r\nconst Footer = props => <footer></footer>;\r\n\r\nexport default Footer;\r\n","import React from \"react\";\r\nimport { Router, Route } from \"react-router-dom\";\r\nimport { history } from \"../utils\";\r\nimport Header from \"./header/Header\";\r\nimport Home from \"./home/Home\";\r\nimport ServicesList from \"./services/ServicesList\";\r\nimport Metrics from \"./metrics/Metrics\";\r\nimport Footer from \"./footer/Footer\";\r\nimport \"../styles/main.scss\";\r\n// import \"../styles/layout-dev.scss\";\r\nclass App extends React.Component {\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<React.Fragment>\r\n\t\t\t\t<Header />\r\n\t\t\t\t<section>\r\n\t\t\t\t\t<main>\r\n\t\t\t\t\t\t<Router history={history}>\r\n\t\t\t\t\t\t\t<Route path=\"/\" component={Home} exact />\r\n\t\t\t\t\t\t\t<Route path=\"/services\" component={ServicesList} exact />\r\n\t\t\t\t\t\t\t<Route path=\"/metrics\" component={Metrics} exact />\r\n\t\t\t\t\t\t</Router>\r\n\t\t\t\t\t</main>\r\n\t\t\t\t</section>\r\n\t\t\t\t<Footer />\r\n\t\t\t</React.Fragment>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default App;\r\n","import React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport App from \"./components/App\";\r\n\r\nReactDOM.render(<App />, document.querySelector(\"#root\"));\r\n"],"sourceRoot":""}