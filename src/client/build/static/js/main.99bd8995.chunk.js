(window.webpackJsonpclient=window.webpackJsonpclient||[]).push([[0],{31:function(e,t,n){e.exports=n.p+"static/media/logo.f48b0626.jpg"},38:function(e,t,n){e.exports=n(83)},43:function(e,t,n){},44:function(e,t,n){},45:function(e,t,n){},46:function(e,t,n){},65:function(e,t,n){},66:function(e,t,n){},67:function(e,t,n){},68:function(e,t,n){},69:function(e,t,n){},70:function(e,t,n){},71:function(e,t,n){},72:function(e,t,n){},73:function(e,t,n){},74:function(e,t,n){},75:function(e,t,n){},76:function(e,t,n){},77:function(e,t,n){},83:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(10),l=n.n(c),o=n(11),s=n(12),i=n(35),u=n(30),m=n(36),d=n(87),f=n(7),E=Object(f.a)(),g=n(1),p=(n(43),function(e){return r.a.createElement("div",{className:"hamburger",onClick:function(){return e.onClick()}},r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null))}),b=function(e){var t=Object(a.useRef)(document.querySelector("body")).current;Object(a.useEffect)(function(){return e&&(t.style="overflow:hidden;"),e||(t.style=""),function(){return t.style=""}},[e,t.style])},v=(n(44),function(e){var t=Object(a.useState)(""),n=Object(g.a)(t,2),c=n[0],l=n[1];return b(c),r.a.createElement("div",null,r.a.createElement(p,{onClick:function(){return l(" open")}}),r.a.createElement("nav",null,r.a.createElement("div",{className:"nav-container".concat(c),onClick:function(){return l("")}},r.a.createElement("div",{className:"nav-slider".concat(c)},r.a.createElement("i",{className:"ui delete icon"}),r.a.createElement("ul",null,r.a.createElement("li",{onClick:function(){return E.push("/")}},"Songs"),r.a.createElement("li",{onClick:function(){return E.push("/metrics")}},"Metrics"),r.a.createElement("li",{onClick:function(){return E.push("/services")}},"Services"))))))}),y=n(31),h=n.n(y),O=(n(45),function(e){return r.a.createElement("div",{className:"brand"},r.a.createElement("img",{src:h.a,alt:"Graceville Presbyterian Church"}))}),j=(n(46),function(e){return r.a.createElement("header",null,r.a.createElement("div",{className:"container"},r.a.createElement(O,null),r.a.createElement(v,null)))}),S=n(8),N=n.n(S),k=n(13),C=n(32),w=n.n(C).a.create({baseURL:"/api/v1"});function T(e,t){var n=Object(a.useState)(t),r=Object(g.a)(n,2),c=r[0],l=r[1],o=Object(a.useState)(null),s=Object(g.a)(o,2),i=s[0],u=s[1],m=Object(a.useState)(!1),d=Object(g.a)(m,2),f=d[0],E=d[1];return Object(a.useEffect)(function(){e&&Object(k.a)(N.a.mark(function t(){var n,a;return N.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return E(!0),t.prev=1,t.next=4,w.get(e);case 4:n=t.sent,l(n.data),t.next=13;break;case 8:t.prev=8,t.t0=t.catch(1),console.error(t.t0),a=t.t0.response?t.t0.response.data.message:t.t0.message,u(a);case 13:E(!1);case 14:case"end":return t.stop()}},t,null,[[1,8]])}))()},[e]),[e?c:t,i,f]}var _=function(e){var t=e.search,n=e.setSearch;return r.a.createElement("div",{className:"my-3"},r.a.createElement("input",{type:"text",className:"form-control ",placeholder:"Search title or author...",value:t,onChange:function(e){return n(e.target.value)}}))},A=function(e){var t=e.page,n=e.pagesNum,a=e.setPage;if(n<2)return null;for(var c=[],l=function(e){c.push(r.a.createElement("button",{className:"btn btn-sm no-glow btn-outline-secondary".concat(e===t+1?" active":""),onClick:function(){return a(e-1)},key:e},e))},o=1;o<=n;o++)l(o);return r.a.createElement("div",{className:"d-flex justify-content-center"},r.a.createElement("div",{className:"btn-group btn-group-toggle"},c))},x=(n(65),function(e){var t=e.song;return r.a.createElement("tr",{className:"song-row"},r.a.createElement("td",null,t.title),r.a.createElement("td",null,t.author),r.a.createElement("td",null,t.key),r.a.createElement("td",null,t.tags.filter(function(e){return!e.match(/category a/i)&&!e.match(/category b/i)}).join(", ")),r.a.createElement("td",null,r.a.createElement("a",{href:t.url,target:"_blank",rel:"noopener noreferrer"},r.a.createElement("i",{className:"ui youtube icon"}))))}),P=(n(66),function(e){var t=e.songs;return r.a.createElement("table",{className:"table songs-table"},r.a.createElement("thead",{className:""},r.a.createElement("tr",null,r.a.createElement("th",null,"Title"),r.a.createElement("th",null,r.a.createElement("i",{className:"ui user icon"})),r.a.createElement("th",null,r.a.createElement("i",{className:"ui key icon"})),r.a.createElement("th",null,r.a.createElement("i",{className:"ui tags icon"})),r.a.createElement("th",null,r.a.createElement("i",{className:"ui chain icon"})))),r.a.createElement("tbody",null,t.map(function(e){return r.a.createElement(x,{key:e._id,song:e})})))}),L=n(16),D=function(){function e(t,n){Object(o.a)(this,e),this.tags=t,this.exclude=n}return Object(s.a)(e,[{key:"_addItem",value:function(e,t){var n=e.toLowerCase();this[t].includes(n)||(this[t]=[].concat(Object(L.a)(this[t]),[n]))}},{key:"_removeItem",value:function(e,t){var n=e.toLowerCase();this[t]=this[t].filter(function(e){return e!==n})}},{key:"addTag",value:function(e){return this._addItem(e,"tags"),this.removeExclude(e),this}},{key:"addExclude",value:function(e){return this._addItem(e,"exclude"),this.removeTag(e),this}},{key:"removeTag",value:function(e){return this._removeItem(e,"tags"),this}},{key:"removeExclude",value:function(e){return this._removeItem(e,"exclude"),this}},{key:"getTags",value:function(){return this.tags}},{key:"getExclude",value:function(){return this.exclude}}]),e}(),R=function(e){var t=e.tags,n=e.setTags,c=e.exclude,l=e.setExclude,o=new D(t,c),s=Object(a.useState)("Category A"),i=Object(g.a)(s,2),u=i[0],m=i[1],d=["Category A","Category B (Hymn)"],f="btn btn-outline-primary no-glow btn-sm",E=Object(a.useState)(""),p=Object(g.a)(E,2),b=p[0],v=p[1];function y(e){return u===e?f+" active":f}return r.a.createElement("div",null,r.a.createElement("div",{className:"btn-group btn-group-toggle mr-2"},d.map(function(e,t){return r.a.createElement("button",{className:y(e),onClick:function(){return function(e){m(e),o.addTag(e).addExclude(e===d[0]?d[1]:d[0]),n(o.getTags()),l(o.getExclude())}(e)},key:t},e)})),r.a.createElement("button",{className:f+b,onClick:function(){b?(v(""),n(o.addExclude("archived").getTags()),l(o.getExclude())):(v(" active"),n(o.addTag("archived").getTags()),l(o.getExclude()))}},r.a.createElement("i",{className:"ui archive icon"})," Archived"))};n(67);var G=function(e){var t=Object(a.useState)(""),n=Object(g.a)(t,2),c=n[0],l=n[1],o=Object(a.useState)(0),s=Object(g.a)(o,2),i=s[0],u=s[1],m=Object(a.useRef)(null);return Object(a.useEffect)(function(){u(m.current.offsetHeight)},[]),Object(a.useEffect)(function(){function e(){window.scrollY>i?l(" stuck"):l("")}return i&&document.addEventListener("scroll",e),function(){return document.removeEventListener("scroll",e)}},[i]),r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"sticky".concat(c),ref:m},"function"===typeof e.children?e.children(c):e.children),c&&r.a.createElement("div",{style:{height:i}}))},I=function(e){var t=e.setLimit,n=e.limitButtons,a=e.setPage,c=e.limit;return r.a.createElement("div",null,r.a.createElement("span",{className:"mr-2"},"Limit: "),r.a.createElement("div",{className:"btn-group btn-group-toggle"},n.map(function(e,n){return r.a.createElement("button",{className:"btn btn-sm no-glow btn-outline-secondary".concat(c===e?" active":""),key:n,onClick:function(){return t(e),void a(0)}},e)})))},M=(n(68),function(e){var t=e.state,n=e.dispatch,a=t.tags,c=t.exclude,l=t.limit;return r.a.createElement(G,null,function(e){return r.a.createElement("section",{className:"songs-controls".concat(e)},r.a.createElement("div",{className:e?"container":""},r.a.createElement(R,{tags:a,setTags:function(e){return n({type:"SET_TAGS",payload:e})},exclude:c,setExclude:function(e){return n({type:"SET_EXCLUDE",payload:e})}}),r.a.createElement(I,{limit:l,setLimit:function(e){return n({type:"SET_LIMIT",payload:e})},setPage:function(e){return n({type:"SET_PAGE",payload:e})},limitButtons:[10,30,50,100,"All"]})))})}),B=n(14);function Y(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,a)}return n}function q(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Y(n,!0).forEach(function(t){Object(B.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Y(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var H=function(e,t){var n=t.type,a=t.payload;switch(n){case"SET_LIMIT":return q({},e,{limit:a});case"SET_PAGE":return q({},e,{page:a});case"SET_TAGS":return q({},e,{tags:a});case"SET_EXCLUDE":return q({},e,{exclude:a});case"SET_SEARCH":return q({},e,{search:a});case"SET_IS_PENDING":return q({},e,{isPending:a});default:return e}},V=(n(69),function(e){return e.loading?r.a.createElement("div",null,r.a.createElement("div",{className:"loader"},r.a.createElement("div",null)),e.children):e.children}),U=function(e){var t=function(e){return Object(a.useReducer)(H,e)}({limit:50,page:0,tags:["category a"],exclude:["archived","deleted"],search:""}),n=Object(g.a)(t,2),c=n[0],l=n[1],o=c.limit,s=c.page,i=c.tags,u=c.exclude,m=c.search,d=Object(a.useState)(""),f=Object(g.a)(d,2),E=f[0],p=f[1],b=Object(a.useState)(!1),v=Object(g.a)(b,2),y=v[0],h=v[1],O=Object(a.useState)(null),j=Object(g.a)(O,2),S=j[0],N=j[1],k=T(Object(a.useMemo)(function(){var e="/songs?limit=".concat(o);return"number"===typeof o&&(e+="&skip=".concat(o*s)),i.length&&(e+="&tags=".concat(i.map(function(e){return e.toLowerCase()}).join(","))),u.length&&(e+="&exclude=".concat(u.map(function(e){return e.toLowerCase()}).join(","))),m&&(e+="&search=".concat(m)),e},[o,s,i,u,m]),{count:0,songs:[]}),C=Object(g.a)(k,3),w=C[0],x=w.count,L=w.songs,D=C[1],R=C[2];return r.a.createElement("section",{className:"songs-list relative my-3"},r.a.createElement(M,{state:c,dispatch:l}),r.a.createElement(_,{search:E,setSearch:function(e){h(!0),p(e),clearTimeout(S),N(setTimeout(function(){l({type:"SET_SEARCH",payload:e}),h(!1)},200))}}),D&&r.a.createElement("p",{className:"alert alert-danger my-2 p-2"},D),r.a.createElement("div",{className:"relative"},r.a.createElement(V,{loading:R||y},r.a.createElement(P,{songs:L}))),r.a.createElement(A,{page:s,pagesNum:Math.ceil(x/o),setPage:function(e){return l({type:"SET_PAGE",payload:e})}}))},F=(n(70),function(e){return r.a.createElement("div",{className:"container py-3"},r.a.createElement(U,null))}),J=n(86);n(71);var W=function(e){return r.a.createElement("table",{className:"table services-table"},r.a.createElement("tbody",null,e.services.map(function(e){return r.a.createElement("tr",{key:e._id},r.a.createElement("td",{style:{width:"60%"}},Object(J.a)(new Date(e.date),"dd/MM/yyyy"),r.a.createElement("ol",null,e.songs.map(function(e,t){return r.a.createElement("li",{key:t},e.title)}))),r.a.createElement("td",null,e.tags&&r.a.createElement("ul",null,e.tags.map(function(e,t){return r.a.createElement("li",{key:t},e)}))))})))};var X=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=Object(a.useReducer)(function(e,n){var a=n.type,r=n.payload;switch(console.log(e),a){case"ADD":return[].concat(Object(L.a)(e),[r]);case"REMOVE":return console.log(r),e.filter(function(e,n){return t.target?e[t.target]!==r:n!==r});case"CLEAR":return[];default:return e}},e),r=Object(g.a)(n,2);return[r[0],r[1],{ADD:"ADD",REMOVE:"REMOVE",CLEAR:"CLEAR"}]};n(72);var K=function(e){var t=Object(a.useState)(" open"),n=Object(g.a)(t,2),c=n[0],l=n[1];return Object(a.useEffect)(function(){e.songs.length||e.isLoading?l(" open"):l("")},[e.songs,e.isLoading]),r.a.createElement("div",{className:"song-selector".concat(c)},r.a.createElement(V,{loading:e.isLoading},r.a.createElement("div",{className:"song-selector-container"},e.songs.map(function(t){return r.a.createElement("div",{key:t._id,onClick:function(){return n=t,e.onSelect(n),void l("");var n}},t.title,r.a.createElement("i",{className:"ui plus icon"}))}))))};n(73);var z=function(e){var t=Object(a.useState)(""),n=Object(g.a)(t,2),c=n[0],l=n[1],o=X([],{target:"_id"}),s=Object(g.a)(o,3),i=s[0],u=s[1],m=s[2],d=Object(a.useState)(""),f=Object(g.a)(d,2),E=f[0],p=f[1],b=T(Object(a.useMemo)(function(){return c.length<3?null:"/songs?limit=5&search=".concat(c)},[c])),v=Object(g.a)(b,3),y=v[0],h=v[1],O=v[2],j=y?y.songs:[];return r.a.createElement("form",{onSubmit:function(t){t.preventDefault(),e.onSubmit({songs:i,date:E})},className:"service-form container"},h&&r.a.createElement("div",{className:"alert alert-danger"},h),r.a.createElement("section",{className:"form-group"},r.a.createElement("label",null,"Date"),r.a.createElement("input",{className:"form-control",type:"date",required:!0,value:E,onChange:function(e){return p(e.target.value)}})),r.a.createElement("section",null,r.a.createElement("label",null,"Songs"),i.length?r.a.createElement("ol",{className:"songs-list"},i.map(function(e){var t=e.title,n=e._id;return r.a.createElement("li",{key:n},t,r.a.createElement("button",{className:"btn btn-sm btn-outline-danger"},r.a.createElement("i",{className:"ui trash icon",onClick:function(){return u({type:m.REMOVE,payload:n})}})))})):r.a.createElement("div",{className:"alert alert-info"},"No songs added")),r.a.createElement("section",{className:"search form-group"},r.a.createElement("input",{type:"text",value:c,onChange:function(e){return l(e.target.value)},className:"form-control",placeholder:"Search songs..."}),r.a.createElement(K,{songs:j,isLoading:O,onSelect:function(e){return u({type:m.ADD,payload:e})}})),r.a.createElement("section",{className:"d-flex justify-content-end"},r.a.createElement("button",{className:"btn btn-sm btn-outline-primary mr-2"},"Save"),r.a.createElement("button",{type:"button",onClick:e.onDismiss,className:"btn btn-sm btn-outline-info mr-2"},"Cancel"),r.a.createElement("button",{type:"button",onClick:function(){return u({type:m.CLEAR})},className:"btn btn-sm btn-outline-secondary"},"Clear")))},Q=function(e){var t=e.title,n=e.onDismiss;return r.a.createElement("div",{className:t?"modal-header":"container-fluid p-2"},t&&r.a.createElement("h5",{className:"modal-title"},t),r.a.createElement("button",{type:"button",className:"close",onClick:n},r.a.createElement("span",{"aria-hidden":"true"},"\xd7")))},Z=function(e){var t=e.footer;return t?r.a.createElement("div",{className:"modal-footer"},t):null},$=function(e){var t=document.querySelector("body"),n=Object(a.useState)("none"),c=Object(g.a)(n,2),o=c[0],s=c[1],i=Object(a.useState)(""),u=Object(g.a)(i,2),m=u[0],d=u[1];Object(a.useEffect)(function(){return e.isOpen&&(t.classList.add("modal-open"),f()),e.isOpen||(E(),t.classList.remove("modal-open")),function(){return t.classList.remove("modal-open")}},[e.isOpen,t.classList]);var f=function(){s("block"),setTimeout(function(){d(" show")},50)},E=function(){d(""),setTimeout(function(){s("none")},100)};return l.a.createPortal(r.a.createElement("div",null,r.a.createElement("div",{className:"modal-backdrop fade".concat(m),style:{display:o}}),r.a.createElement("div",{className:"modal fade".concat(m),onClick:e.onDismiss,style:{display:o}},r.a.createElement("div",{className:"modal-dialog modal-dialog-centered ".concat(e.large?"modal-lg":""," ").concat(e.small?"modal-sm":""),onClick:function(e){return e.stopPropagation()}},r.a.createElement("div",{className:"modal-content",onSubmit:function(e){return e.stopPropagation()}},r.a.createElement(Q,{title:e.title,onDismiss:e.onDismiss}),r.a.createElement("div",{className:"modal-body"},e.children),r.a.createElement(Z,{footer:e.footer}))))),document.querySelector("#modal"))};var ee=function(e){var t=Object(a.useState)(10),n=Object(g.a)(t,2),c=n[0],l=n[1],o=Object(a.useState)(0),s=Object(g.a)(o,2),i=s[0],u=s[1],m=Object(a.useState)(!1),d=Object(g.a)(m,2),f=d[0],E=d[1],p=Object(a.useState)(!1),b=Object(g.a)(p,2),v=b[0],y=b[1],h=Object(a.useState)(""),O=Object(g.a)(h,2),j=O[0],S=O[1],C=T(Object(a.useMemo)(function(){var e="/services?limit=".concat(c);return"number"===typeof c&&(e+="&skip=".concat(c*i)),e},[c,i]),{count:0,services:[]}),_=Object(g.a)(C,3),x=_[0],P=x.count,L=x.services,D=_[1],R=_[2];function G(){return(G=Object(k.a)(N.a.mark(function e(t){var n,a;return N.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return y(!0),e.prev=1,e.next=4,w.post("/services",t);case 4:n=e.sent,console.log(n),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(1),a=e.t0.response?e.t0.response.data.message:e.t0.message,S(a);case 12:y(!1);case 13:case"end":return e.stop()}},e,null,[[1,8]])}))).apply(this,arguments)}return r.a.createElement("section",{className:"container relative py-3"},r.a.createElement("h4",null,"Services"),D||j&&r.a.createElement("p",{className:"alert alert-danger my-2 p-2"},D||j),r.a.createElement("div",{className:"d-flex justify-content-between align-items-start"},r.a.createElement("button",{className:"btn btn-sm btn-outline-primary",onClick:function(){return E(!0)}},r.a.createElement("i",{className:"ui plus icon"})," Add Service"),r.a.createElement(I,{limit:c,setLimit:l,setPage:u,limitButtons:[5,10,20]})),r.a.createElement("div",{className:"relative"},r.a.createElement(V,{loading:R||v},r.a.createElement(W,{services:L}))),r.a.createElement(A,{page:i,pagesNum:Math.ceil(P/c),setPage:u}),r.a.createElement($,{isOpen:f,onDismiss:function(){return E(!1)},large:!0,title:"New Service"},r.a.createElement(z,{onDismiss:function(){return E(!1)},onSubmit:function(e){return G.apply(this,arguments)}})))};var te=function(e){var t=[["Category A",function(){return e.setCategory(/Category A/i)}],["Category B (Hymn)",function(){return e.setCategory(/Category B/gi)}]];return r.a.createElement("div",{className:"btn-group btn-group-toggle"},t.map(function(t,n){var a=Object(g.a)(t,2),c=a[0],l=a[1];return r.a.createElement("button",{key:n,type:"button",onClick:l,className:"btn btn-sm btn-outline-primary no-glow".concat(c.match(e.category)?" active":"")},c)}))};var ne=function(e){return r.a.createElement("div",{className:"btn-group btn-group-toggle"},[["Total","total"],["2yrs","2 years"],["1yr","1 year"],["6mths","6 months"],["3mths","3 months"],["1mth","1 month"]].map(function(t,n){var a=Object(g.a)(t,2),c=a[0],l=a[1];return r.a.createElement("button",{key:n,type:"button",onClick:function(){return e.setRange(l)},className:"btn btn-sm btn-outline-secondary no-glow".concat(e.range===l?" active":"")},c)}))};n(74);var ae=function(e){var t=e.state,n=e.dispatch,a=t.range,c=t.category;return r.a.createElement(G,null,function(e){return r.a.createElement("div",{className:"metrics-controls".concat(e?" stuck":"")},r.a.createElement("div",{className:e?"container":""},r.a.createElement(te,{category:c,setCategory:function(e){return n({type:"SET_CATEGORY",payload:e})}}),r.a.createElement(ne,{range:a,setRange:function(e){return n({type:"SET_RANGE",payload:e})}})))})};var re=function(e){var t=e.state,n=e.dispatch,a=t.sortBy,c=t.isAsc;return r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Title"),r.a.createElement("th",{className:"text-center sortable",onClick:function(){return n("PLAYS"===a?{type:"TOGGLE_IS_ASC"}:{type:"SET_SORT_BY",payload:"PLAYS"})}},"Plays","PLAYS"===a&&r.a.createElement("i",{className:"ui ".concat(c?"up":"down"," chevron icon ml-2")})),r.a.createElement("th",{className:"text-right sortable",onClick:function(){return n("PLAYS"===a?{type:"SET_SORT_BY",payload:"WEEKS"}:{type:"TOGGLE_IS_ASC"})}},"Wks since played","PLAYS"!==a&&r.a.createElement("i",{className:"ui ".concat(c?"down":"up"," chevron icon ml-2")}))))},ce=n(85),le=n(88);function oe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,a)}return n}function se(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?oe(n,!0).forEach(function(t){Object(B.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):oe(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function ie(e,t){var n=t.type,a=t.payload;switch(n){case"SET_RANGE":return se({},e,{range:a});case"SET_CATEGORY":return se({},e,{category:a});case"SET_SORT_BY":return se({},e,{sortBy:a});case"SET_IS_ASC":return se({},e,{isAsc:a});case"TOGGLE_IS_ASC":return se({},e,{isAsc:!e.isAsc});case"SET_SONGS":return se({},e,{songs:a});default:return e}}var ue=function(e){return function(t,n){var a=t.metrics.weeksSincePlayed,r=n.metrics.weeksSincePlayed;return a="string"===typeof a?9999999:a,r="string"===typeof r?9999999:r,e?r-a:a-r}},me=function(e,t){return function(n,a){return t?n.metrics.plays[e]-a.metrics.plays[e]:a.metrics.plays[e]-n.metrics.plays[e]}},de=new Date;var fe=function(e){var t,n=e.state,a=(e.dispatch,n.sortBy),c=n.isAsc,l=n.songs,o=n.range,s=n.category,i=(l=function(e){return e.map(function(e){var t,n=e.services;return n.length?((n=n.map(function(e){return new Date(e.date)})).length>1&&(n=n.sort(function(e,t){return Object(ce.a)(e,t)})),t=Object(le.a)(de,n[0])):t="\u221e",e.metrics.weeksSincePlayed=t,e})}(l)).reduce(function(e,t){return e+t.metrics.plays[o]},0)/l.length;return r.a.createElement("tbody",null,(t=l.filter(function(e){return e.tags.find(function(e){return e.match(s)})}),"PLAYS"===a?t.sort(ue(c)).sort(me(o,c)):t.sort(me(o,c)).sort(ue(c))).map(function(e,t){return r.a.createElement("tr",{key:t,className:e.metrics.plays[o]<i?"text-danger":""},r.a.createElement("td",null,e.title),r.a.createElement("td",{className:"text-center"},e.metrics.plays[o]),r.a.createElement("td",{className:"text-right"},e.metrics.weeksSincePlayed))}))};var Ee=function(e){return r.a.createElement("table",{className:"table songs-table"},r.a.createElement(re,e),r.a.createElement(fe,e))};n(75);var ge=function(e){var t=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object(a.useReducer)(ie,e),n=Object(g.a)(t,2);return[n[0],n[1]]}({range:"6 months",category:/Category A/i,sortBy:"PLAYS",isAsc:!1,songs:[]}),n=Object(g.a)(t,2),c=n[0],l=n[1],o=T("/songs/metrics",{songs:[],count:0}),s=Object(g.a)(o,3),i=s[0].songs,u=s[1],m=s[2];return Object(a.useEffect)(function(){l({type:"SET_SONGS",payload:i})},[i,l]),r.a.createElement("section",{className:"metrics container py-3 relative"},r.a.createElement(ae,{state:c,dispatch:l}),r.a.createElement(V,{loading:m},u&&r.a.createElement("div",{className:"alert alert-danger"},u),r.a.createElement(Ee,{state:c,dispatch:l})))},pe=(n(76),function(e){return r.a.createElement("footer",null)}),be=(n(77),function(e){function t(){return Object(o.a)(this,t),Object(i.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(j,null),r.a.createElement("section",null,r.a.createElement("main",null,r.a.createElement(d.b,{history:E},r.a.createElement(d.a,{path:"/",component:F,exact:!0}),r.a.createElement(d.a,{path:"/services",component:ee,exact:!0}),r.a.createElement(d.a,{path:"/metrics",component:ge,exact:!0})))),r.a.createElement(pe,null))}}]),t}(r.a.Component));l.a.render(r.a.createElement(be,null),document.querySelector("#root"))}},[[38,1,2]]]);
//# sourceMappingURL=main.99bd8995.chunk.js.map